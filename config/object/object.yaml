apiVersion: kubernetes.crossplane.io/v1alpha1
kind: Object
metadata:
  name: foo
  annotations:
    kubernetes.crossplane.io/managementType: Undeletable
spec:
  # Use management policy ObserveDelete to observe or delete k8s resource,
  # but leave to third party to create or update the resource
  forProvider:
    manifest:
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        name: delete-script-waitting
        namespace: katamari
      spec:
        selector:
          matchLabels:
            app: deleting
        template:
          metadata:
            labels:
              app: deleting
          spec:
            containers:
              - name: deleting
                image: quay.io/openshift/origin-cli:latest
                imagePullPolicy: IfNotPresent
                resources:
                  requests:
                    memory: "100Mi"
                    cpu: "50m"
                  limits:
                    memory: "100Mi"
                    cpu: "50m"
                command:
                  - /bin/sh
                  - -c
                  - |
                    set -eo pipefail
                    set -x

                    echo "begin"
                    for ((i=0;i<1000;i++))
                    do
                      echo $i
                      sleep 2s
                    done

            restartPolicy: Always
        backoffLimit: 1
  providerConfigRef:
    name: kubernetes-provider
